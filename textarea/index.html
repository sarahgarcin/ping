<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Timeline prototype</title>
	<link rel="stylesheet" href="style.css">

	<script src="jquery-1.11.0.min.js"></script>


</head>
<body>

<div class="left"></div>
<div class="right">
    <textarea></textarea>
</div>



<script>

$(document).ready(function () {

    $temps = 0;

    var chrono = setInterval(function () {
        timeline()
    }, 1000);

    addBR();


});

function addBR() {
 						
	var chrono = 0;  

	chrono = setInterval(function () {
		linebreak();
	}, 1000);

	function linebreak() {
		var currentVal = $('textarea').val();
		$('textarea').val(currentVal + '|\n');
	}

    $('textarea').keypress(function(event){
    	var keycode = (event.keyCode ? event.keyCode : event.which);
    	if(keycode != '13'){
    		console.log('You pressed a key');
    		clearInterval(chrono);
    	}
		else if (keycode == '13'){
			console.log('You pressed a "enter" key in textbox');
			chrono = setInterval(function () {
				linebreak();
			}, 1000);
		}
		else {
			// chrono = setInterval(function () {
			// 	console.log('normal');
			// 	var currentVal = $('textarea').val();
	  //   		$('textarea').val(currentVal + '|\n');
	  //   	}, 1000);
    		linebreak();
		}
	});

}
    	





//     	if($('textarea').keypress(){

//     	})
//     	console.log('You pressed a key');
//     }

//     if ($('textarea').keypress()){
//     	console.log('You pressed a key');
//     }

//     else if  {
//    	$('textarea').keypress(function(event){
//  		var keycode = (event.keyCode ? event.keyCode : event.which);
// 		if(keycode == '13'){
// 			console.log('You pressed a "enter" key in textbox');
// 			var currentVal = $('textarea').val();
//     		$('textarea').val(currentVal + '|\n');	
// 		}
 
// 	});

// $(document).keypress(function(e) {
//     if(e.which == 13) {
//         alert('You pressed enter!');
//     }
// });

//     }

//     else {
// 		var currentVal = $('textarea').val();
//     	$('textarea').val(currentVal + '|\n');
// 	}


function timeline() {

	$temps++;

    var etape = $("<div class='etape'>" + $temps + "</div>");

    date = new Date();

    etape.data("timecode", date)
        .click(function (event) {
        console.log($(this).text() + " " + $(this).data("timecode"));
    });


    $(".left").append(etape);
}


</script>
	
</body>
</html>